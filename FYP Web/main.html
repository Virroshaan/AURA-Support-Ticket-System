<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>AURA Admin Dashboard</title>
  <style>
    body {
      margin:0;
      font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif;
      height:100vh;
      display:flex;
      background:url("login.avif") no-repeat center center fixed;
      background-size:cover;
      color:white;
      position:relative;
    }
    body::before {
      content:"";
      position:absolute;
      inset:0;
      background:rgba(0,0,0,0.6);
      z-index:0;
    }

    .sidebar {
      position:fixed;
      left:0;
      top:0;
      bottom:0;
      width:240px;
      background:rgba(31,41,55,0.95);
      display:flex;
      flex-direction:column;
      padding:80px 1px 10px;
      z-index:10;
    }

    .profile {
      text-align:center;
      margin-bottom:18px;
    }
    .profile img {
      width:110px;
      height:80px;
      border-radius:50%;
      margin-bottom:8px;
    }
    .profile h3 {
      margin:0;
      font-size:16px;
      color:#fff;
    }

    .menu {
      margin-top:40px;
      flex:1;
    }
    .menu a {
      display:block;
      padding:10px 12px;
      color:#d1d5db;
      text-decoration:none;
      border-radius:8px;
      margin-bottom:6px;
      font-size:15px;
      cursor:pointer;
    }
    .menu a.active,
    .menu a:hover {
      background:#374151;
      color:#fff;
    }

    .main {
      flex:1;
      display:flex;
      flex-direction:column;
      position:relative;
      z-index:1;
      margin-left:240px;
      height:100vh;
      overflow:auto;
    }

    .header {
      padding:16px;
      background:rgba(30,64,175,.95);
      font-size:18px;
      font-weight:bold;
      display:flex;
      justify-content:space-between;
      align-items:center;
    }

    #tickets {
      background:rgba(17,24,39,0.9);
      margin:8px 16px 16px !important;
      padding:20px;
      border-radius:10px;
      box-shadow:0 0 10px rgba(0,0,0,0.4);
    }

    .ticket-card {
      border-radius:12px;
      padding:14px 18px;
      margin-bottom:14px;
      transition:transform .25s ease,box-shadow .3s ease;
      background:rgba(40,40,40,.85);
    }
    .ticket-card:hover {
      transform:translateY(-3px);
      box-shadow:0 4px 20px rgba(255,255,255,.1);
    }

    input,select,button {
      font-family:inherit;
    }
    input,select {
      padding:10px;
      border-radius:6px;
      border:1px solid #555;
      background:rgba(255,255,255,.9);
      color:#111;
      font-size:14px;
      transition:border-color .3s,box-shadow .3s;
    }
    input:focus,select:focus {
      border-color:#1d4ed8;
      box-shadow:0 0 5px #1d4ed8;
      outline:none;
    }
    button {
      padding:10px 16px;
      border:none;
      border-radius:8px;
      font-weight:600;
      cursor:pointer;
      transition:background .3s,transform .2s;
    }
    button:hover {
      transform:scale(1.05);
    }
    .btn-assign {
      background:#1d4ed8;
      color:white;
    }

    /* Top profile area */
    #topProfile {
      position:absolute;
      top:12px;
      left:12px;
      z-index:20;
      display:flex;
      align-items:center;
      gap:8px;
    }

    #avatarBtn,
    #quickCreateBtn {
      width:36px;
      height:36px;
      border-radius:50%;
      border:1px solid rgba(255,255,255,.4);
      background:rgba(31,41,55,.95);
      color:#fff;
      cursor:pointer;
      display:flex;
      align-items:center;
      justify-content:center;
      box-shadow:0 2px 6px rgba(0,0,0,.3);
      position:relative;
    }

    /* Avatar icon (usericon.svg) */
    #avatarBtn img {
      width:16px;
      height:16px;
      display:block;
      position:absolute;
      top:50%;
      left:50%;
      transform:translate(-50%,-50%);
      filter:drop-shadow(0 0 2px rgba(255,255,255,0.5));
    }

    /* Create Account icon */
    #quickCreateBtn img {
      width:16px;
      height:16px;
      display:block;
      position:absolute;
      top:50%;
      left:50%;
      transform:translate(-50%,-50%);
      filter:drop-shadow(0 0 2px rgba(255,255,255,0.5));
    }

    #profileDropdown {
      display:none;
      position:absolute;
      top:42px;
      left:0;
      min-width:260px;
      background:#111827;
      color:#f9fafb;
      border:1px solid rgba(255,255,255,.12);
      border-radius:10px;
      padding:12px;
      box-shadow:0 10px 24px rgba(0,0,0,.35);
    }

    .prof-row {
      display:flex;
      gap:10px;
      align-items:center;
    }
    .prof-avatar {
      width:38px;
      height:38px;
      border-radius:50%;
      background:#374151;
      display:flex;
      align-items:center;
      justify-content:center;
      font-size:18px;
    }
    .prof-name { font-weight:600 }
    .prof-email { font-size:12px; opacity:.85 }

    #profileLogout {
      width:100%;
      margin-top:10px;
      padding:10px;
      border:none;
      border-radius:8px;
      background:#dc2626;
      color:#fff;
      font-weight:700;
      cursor:pointer;
    }
    #profileLogout:hover { background:#b91c1c }

    #chat { margin-top:12px !important; }
  </style>

  <script type="module" src="admin.js"></script>
  <script type="module" src="logout.js"></script>
</head>
<body>
  <div class="sidebar">
    <div id="topProfile">
      <!-- Profile icon using image -->
      <button id="avatarBtn" aria-haspopup="true" aria-expanded="false" title="Profile">
        <img src="usericon.svg" alt="Profile Icon">
      </button>

      <!-- Create Account icon -->
      <button id="quickCreateBtn" aria-label="Create account" title="Create account">
        <img src="myicon.svg" alt="Create Account">
      </button>

      <div id="profileDropdown" role="menu" aria-label="Profile menu">
        <div class="prof-row">
          <div class="prof-avatar">ðŸ‘¤</div>
          <div>
            <div id="profName" class="prof-name">Loading...</div>
            <div id="profEmail" class="prof-email">-</div>
          </div>
        </div>
        <button id="profileLogout">Logout</button>
      </div>
    </div>

    <div class="profile">
      <img src="logo.png" alt="Admin">
      <h3>WELCOME, Admin</h3>
    </div>
    <div class="menu">
      <a class="active" id="menu-dashboard" href="main.html">Admin Dashboard</a>
      <a id="menu-techs" href="technicians.html">Technicians</a>
      <a id="menu-chat" href="chat.html">Admin Chat</a>
      <a id="menu-history" href="history.html">Tickets History</a>
    </div>
  </div>

  <div class="main">
    <div class="header">
      <span>Admin Dashboard</span>
      <span>âš¡ AURA System</span>
    </div>

    <div id="diagStats"></div>

    <div id="tickets">
      <div id="loadingTickets" style="text-align:center;padding:20px;font-size:15px;opacity:0.7;">
        Loading tickets...
      </div>
    </div>

    <div id="chat" style="margin-top:16px;"></div>
  </div>

  <script>
    // Confirm and navigate to signup page
    document.getElementById('quickCreateBtn')?.addEventListener('click', () => {
      if (confirm('Open the Create Account page?')) {
        window.location.href = 'signup.html';
      }
    });
  </script>
</body>
</html>
